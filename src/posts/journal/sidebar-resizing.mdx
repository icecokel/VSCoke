---
title: "사이드바 리사이징 구현기"
date: "2025-12-22"
description: "사이드바 리사이징 기능 구현부터 성능 최적화, UX 개선까지의 과정 기록"
tags: [Sidebar, Resizing, UX, Optimization, Next.js]
published: false
---

# 사이드바 리사이징 구현기

## 1. 고민과 문제점

프로젝트의 사이드바가 고정 너비(`16rem`)로 되어 있어, 깊은 계층의 파일이나 긴 이름을 가진 파일명을 확인하기 어려웠습니다. 특히 블로그 포스트 제목이 길어지면서 파일명이 개행되는 문제가 발생해 가독성이 떨어졌습니다.

VS Code처럼 사용자가 자유롭게 너비를 조절할 수 있는 기능을 추가하여 이 문제를 해결하고자 했습니다.

## 2. 선택지 분석

### 방법 1: 라이브러리 사용 (react-resizable 등)

- **장점**: 구현이 빠르고 검증된 기능을 사용할 수 있음.
- **단점**: 추가 의존성이 생기고, 우리 프로젝트의 커스텀 UI(Tailwind, shadcn/ui)와 완벽하게 통합하기 위해 스타일 커스터마이징이 필요함.

### 방법 2: 직접 구현 (Mouse Event Listeners)

- **장점**: 의존성 없이 가볍게 구현 가능하며, 프로젝트 상황에 맞는 최적화(쿠키 저장, 애니메이션 제어 등)가 용이함.
- **단점**: 드래그 로직, 성능 최적화, 엣지 케이스 처리를 직접 해야 함.

기존 `Sidebar` 컴포넌트 구조를 유지하면서 세밀한 제어가 필요했기에 **직접 구현**을 선택했습니다.

## 3. 해결 과정

### 1단계: 기본 리사이징 구현

`SidebarRail` 컴포넌트에 마우스 이벤트를 추가하여 드래그 기능을 구현했습니다.
초기에는 `useState`로 너비를 관리하고 리렌더링을 통해 스타일을 업데이트했습니다.

```tsx
const onMouseMove = e => {
  setSidebarWidth(`${e.clientX}px`); // 매 프레임마다 State 업데이트 -> 리렌더링 발생
};
```

### 2단계: 성능 최적화 (Direct DOM Manipulation)

State 기반 업데이트는 매 픽셀 이동마다 리렌더링을 유발하여 드래그가 끊기는 느낌(Lag)을 주었습니다.
이를 해결하기 위해 드래그 중에는 **State 업데이트 없이 DOM에 직접 CSS Variable을 주입**하는 방식으로 변경했습니다.

```tsx
const onMouseMove = e => {
  // 리렌더링 없이 즉시 스타일 반영
  sidebarWrapper.style.setProperty("--sidebar-width", `${newWidth}rem`);
};
```

### 3단계: UX 디테일 잡기 (Transition & Cursor)

드래그 성능은 좋아졌지만, 여전히 부자연스러운 부분들이 있었습니다.

1.  **고무줄 현상**: 사이드바에 적용된 `transition: width 0.2s` 때문에 마우스를 빠르게 움직이면 사이드바가 늦게 따라오는 현상이 발생했습니다. -> **드래그 중에는 `transition: none` 처리**하여 해결했습니다.
2.  **커서**: 사이드바가 접혀있을 때도 리사이징 커서가 떠서 사용자를 혼란스럽게 했습니다. -> **`collapsed` 상태에서는 리사이징 비활성화 및 커서 기본값 변경**으로 해결했습니다.

## 4. 최종 결과

- **부드러운 리사이징**: Direct DOM 조작으로 60fps에 가까운 부드러운 드래그 경험을 제공합니다.
- **사용자 편의성**: 더블 클릭 시 `16rem`으로 초기화되며, 변경된 너비는 쿠키에 저장되어 다음 방문 시에도 유지됩니다.
- **가독성 확보**: 너비를 늘려 긴 파일명도 시원하게 볼 수 있게 되었습니다. (말줄임/툴팁 기능도 함께 추가)

## 5. 후기

단순해 보이는 기능이었지만, '그냥 되는 것'과 '부드럽게 잘 되는 것' 사이에는 많은 디테일이 숨어있었습니다. 특히 React의 상태 관리와 브라우저 렌더링 성능 사이의 트레이드오프를 직접 체감하고 해결해 본 좋은 경험이었습니다.
