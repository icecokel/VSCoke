---
title: Promise method
date: 2023-10-26
published: publish
---

# Promise method

## 1. Promise

`Promise`는 프로미스가 생성된 시점에는 알려지지 않았을 수도 있는 값을 위한 대리자로, 비동기 연산이 종료된 이후에 결과 값과 실패 사유를 처리하기 위한 처리기를 연결할 수 있습니다. 프로미스를 사용하면 비동기 메서드에서 마치 동기 메서드처럼 값을 반환할 수 있습니다. 다만 최종 결과를 반환하는 것이 아니고, 미래의 어떤 시점에 결과를 제공하겠다는 '약속'(프로미스)을 반환합니다.

## 2. Promise state

- 대기(_pending)_: 이행하지도, 거부하지도 않은 초기 상태.
- 이행(_fulfilled)_: 연산이 성공적으로 완료됨.
- 거부(_rejected)_: 연산이 실패함.

## 3. Promise method

[https://velog.io/@ansrjsdn/Promise.all-과-Promise.allSettled-의-차이](https://velog.io/@ansrjsdn/Promise.all-%EA%B3%BC-Promise.allSettled-%EC%9D%98-%EC%B0%A8%EC%9D%B4)

### Promise.all

모든 Promise가 이행되거나 하나라도 거부될 때까지 기다린 다음, 모든 Promise의 결과 값을 배열로 반환합니다.

### Promise.allSettled

- 이 메소드는 주어진 모든 **`Promise`**가 이행되거나 거부될 때까지 기다립니다.
- 모든 **`Promise`**의 상태(이행 또는 거부)와 결과 값을 가진 배열을 반환합니다.

### Promise.any

이 메소드는 주어진 **`Promise`** 중 하나라도 이행될 때까지 기다립니다.

### Promise.race

가장 먼저 이행되거나 거부된 Promise의 결과 값을 반환합니다.

```js
const foreachFn = () => {
  resultDiv.innerHTML = "loading...";
  const requests = [getUser(), getAddress(), getPosts()];

  const results = [];
  requests.forEach(async (req, index) => {
    const res = await req;
    result.push({ res, index });
  });

  printing(results);
};
const forOfFn = async () => {
  resultDiv.innerHTML = "loading...";
  const requests = [getUser(), getAddress(), getPosts()];

  const results = [];
  for (const [index, req] of requests.entries()) {
    const res = await req;
    results.push({ res, index });
  }
  printing(results);
};

const fetching = url => async () => {
  const res = await fetch(`http://localhost:8080/${url}`);
  return res.json();
};

const getUser = fetching("user");
const getAddress = fetching("address");
const getPosts = fetching("posts");
```

### Promise.resolve

주어진 값을 가지고 이행(resolve)된 Promise를 반환합니다.

### Promise.reject

주어진 이유(reason)로 거부(reject)된 Promise를 반환합니다.

## 4. foreach vs for of (순차)

배열 await

for of

## foreach vs promise.all

[https://velog.io/@0709/forEach와-Promise.all](https://velog.io/@0709/forEach%EC%99%80-Promise.all)
